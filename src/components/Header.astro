---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import LanguagePicker from './LanguagePicker.astro';
import ThemeToggle from './ThemeToggle.astro';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<header class="glassmorphism-clean fixed top-0 left-0 right-0 z-50 glassmorphism border-b dark:border-space-light/20 light:border-gray-200">
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <a href={`/${lang === 'pt' ? '' : lang}`} class="text-2xl font-bold font-display glow-text dark:text-white light:text-black transition-all duration-300 hover:scale-110">
        IM
      </a>
      
      <div class="hidden md:flex items-center gap-8">
        <a href={`/${lang === 'pt' ? '' : lang}#home`} class="dark:text-text-secondary light:text-light-text-secondary dark:hover:text-white light:hover:text-black transition-all duration-300 relative group">
          {t('nav.home')}
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 dark:bg-white light:bg-black transition-all duration-300 group-hover:w-full"></span>
        </a>
        <a href={`/${lang === 'pt' ? '' : lang}#projects`} class="dark:text-text-secondary light:text-light-text-secondary dark:hover:text-white light:hover:text-black transition-all duration-300 relative group">
          {t('nav.projects')}
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 dark:bg-white light:bg-black transition-all duration-300 group-hover:w-full"></span>
        </a>
        <a href={`/${lang === 'pt' ? '' : lang}#skills`} class="dark:text-text-secondary light:text-light-text-secondary dark:hover:text-white light:hover:text-black transition-all duration-300 relative group">
          {t('nav.skills')}
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 dark:bg-white light:bg-black transition-all duration-300 group-hover:w-full"></span>
        </a>
        <a href={`/${lang === 'pt' ? '' : lang}#contact`} class="dark:text-text-secondary light:text-light-text-secondary dark:hover:text-white light:hover:text-black transition-all duration-300 relative group">
          {t('nav.contact')}
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 dark:bg-white light:bg-black transition-all duration-300 group-hover:w-full"></span>
        </a>
      </div>

      <div class="flex items-center gap-4">
        <ThemeToggle />
        <LanguagePicker currentLang={lang} />
      </div>
    </div>
  </nav>
</header>
